---
date: 2025-08-15 00:11:15
permalink: /php/composer
categories:
  - Composer
tags:
  - Composer
---

# Composer笔记

## Composer官网

- <https://getcomposer.org/>

## 获取全局配置

```shell
➜  ~ composer config -g -l
[repositories.packagist.org.type] composer
[repositories.packagist.org.url] https://repo.packagist.org
[process-timeout] 300
[use-include-path] false
...
```

## 更新项目依赖包

```shell
➜  ~ composer update -o
```

## 升级composer

```shell {1}
$ composer self-update
Upgrading to version 2.3.5 (stable channel).

Use composer self-update --rollback to return to version 2.1.10
```

如需撤销本次升级，回滚到原来的版本。使用：

```shell
composer self-update --rollback
```

## 回滚到指定版本

```shell
# 回滚到1.*大版本
composer self-update --1
```

## 全局配置国内源镜像

```shell
# 阿里云镜像
composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/
# 腾讯云镜像
composer config -g repos.packagist composer https://mirrors.tencent.com/composer/
```

### 取消配置

```shell
composer config -g --unset repos.packagist
```

## 项目配置国内源镜像

### 仅修改当前工程配置，仅当前工程可使用该镜像地址

```shell
# 阿里云镜像
composer config repo.packagist composer https://mirrors.aliyun.com/composer/
# 腾讯云镜像
composer config repo.packagist composer https://mirrors.tencent.com/composer/
```

### 取消配置

```shell
composer config --unset repos.packagist
```

## 遇到问题？

### 1. 建议先将Composer版本升级到最新

```shell
composer self-update
```

### 2. 执行诊断命令

```shell
composer diagnose
```

### 3. 清除缓存

```shell
composer clear
```

### 4. 若项目之前已通过其他源安装，则需要更新 composer.lock 文件，执行命令

```shell
composer update --lock
```

## 指定PHP版本，以及依赖包指定PHP版本

- composer.json配置如下：

```json
"config": {
"platform": {
"php": "7.4.33"
}
},
```

## 指定依赖包的版本安装

```shell
# 如：指定安装 不高于 9.6 的PHP单元测试（PHP 7.3 - 7.4 最高可用版本）
composer require --dev phpunit/phpunit ^9.6
```
